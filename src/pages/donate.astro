---
import BaseLayout from '../layouts/BaseLayout.astro';
import HeroSection from '../components/HeroSection.astro';
import SectionHeader from '../components/SectionHeader.astro';
import CalloutCard from '../components/CalloutCard.astro';
import DonatePageStyles from '../components/DonatePageStyles.astro';



const giveLivelyScript =
  'https://secure.givelively.org/widgets/simple_donation/the-league-of-amazing-programmers.js?show_in_honor_of=true&show_suggested_amount_buttons=true&suggested_donation_amounts[]=500&suggested_donation_amounts[]=250&suggested_donation_amounts[]=125&suggested_donation_amounts[]=75&suggested_donation_amounts[]=25&address_required=false';

const donationImpact = [
  {
    title: 'Scholarships & Tuition Assistance',
    description:
      'Gifts unlock need-based tuition for students who qualify for free and reduced lunch, ensuring cost never blocks a curious learner.'
  },
  {
    title: 'Volunteer Mentor Training',
    description:
      'Donations fund onboarding, background checks, and ongoing mentor development so every class is supported by caring adults.'
  },
  {
    title: 'Equipment & Curriculum',
    description:
      'Support provides laptops, robotics kits, and updated curriculum so students can build, test, and ship real projects.'
  }
];

const donationMethods = [
  {
    title: 'Recurring Giving',
    description:
      'Set up a sustaining gift through Give Lively to fuel classes every month and help us plan for year-round programming.',
    cta: { label: 'Start a Monthly Gift', href: '#donate-now', variant: 'secondary' as const }
  },
  {
    title: 'PayPal or Check',
    description:
      'Prefer PayPal or mailing a check? Reach out and we will send instructions for tax receipts and matching paperwork.',
    cta: { label: 'Request Details', href: 'mailto:info@jointheleague.org', variant: 'secondary' as const }
  },
  {
    title: 'Employer Matching',
    description:
      'Double your impact through corporate matching gifts or payroll deductions. We can provide EIN and verification forms.',
    cta: { label: 'Start a Match', href: 'mailto:info@jointheleague.org?subject=Employer%20Matching%20Gift', variant: 'secondary' as const }
  },
  {
    title: 'Stock & Donor-Advised Funds',
    description:
      'We gratefully accept appreciated securities and DAF distributions. Contact us to coordinate wire instructions.',
    cta: { label: 'Coordinate a Transfer', href: 'mailto:info@jointheleague.org?subject=Stock%20or%20DAF%20Gift', variant: 'secondary' as const }
  },
  {
    title: 'Planned Giving',
    description:
      'Create a legacy through estate gifts, beneficiary designations, or charitable trusts that sustain future students.',
    cta: { label: 'Plan a Legacy Gift', href: 'mailto:info@jointheleague.org?subject=Planned%20Giving%20Inquiry', variant: 'secondary' as const }
  }
];

const donationFaq = [
  {
    question: 'Is my donation tax-deductible?',
    answer:
      'Yes. The League of Amazing Programmers is a 501(c)(3) nonprofit. You will receive an email receipt immediately after giving and a year-end summary upon request.'
  },
  {
    question: 'Can I dedicate my gift in honor of someone?',
    answer:
      'Absolutely. The Give Lively form includes an "In Honor Of" option and we are happy to send a notification card or email to your honoree.'
  },
  {
    question: 'How do I update or cancel a recurring donation?',
    answer:
      'Email info@jointheleague.org and our team will adjust your recurring gift within two business days. You can also make changes directly through Give Lively.'
  },
  {
    question: 'Do you accept in-kind donations?',
    answer:
      'Yes. We welcome new or gently used laptops, robotics kits, and classroom supplies. Contact us to review current needs and drop-off details.'
  }
];
---

<BaseLayout
  title="Donate"
  description="Support The League of Amazing Programmers and help every student in San Diego access high-quality computer science education."
>
  <DonatePageStyles />
  <HeroSection
    surface="alt"
    tag="Support The League"
    title="Fuel the Next Generation of Programmers"
    description="Every contribution keeps tuition affordable, funds scholarships, and equips classrooms so San Diego youth can build real-world coding experience."
    details={[
      '100% of gifts stay local to mentor students across San Diego County',
      'Small class sizes with professional instructors and volunteer mentors',
      'Scholarships, laptops, and internship stipends for emerging programmers'
    ]}
    actions={[
      { label: 'Donate Now', href: '#donate-now', variant: 'primary' },
      { label: 'See Our Supporters', href: '/donate/supporters/', variant: 'secondary' }
    ]}
    aside={{
      title: 'Your Gift Supports',
      items: [
        'Sliding-scale tuition and full scholarships',
        'Volunteer mentor training and classroom supplies',
        'Tech Club outreach in libraries, schools, and community centers',
        'League Labs internships that launch student-led curriculum'
      ]
    }}
  />

  <section class="section" id="donate-now">
    <div class="container donation-widget">
      <div class="donation-widget__grid">
        <div>
          <SectionHeader align="left">
            <eyebrow>Give Online</eyebrow>
            <h2>Make a Secure Donation</h2>
            <p>Use our Give Lively form to make a one-time gift or start a monthly donation that keeps classes running year-round.</p>
          </SectionHeader>
          <div id="give-lively-widget" class="donation-widget__embed" />
          <p class="donation-widget__note">
            Prefer a direct link? Visit
            <a href="https://secure.givelively.org/donate/the-league-of-amazing-programmers" target="_blank" rel="noreferrer">
              our Give Lively page
            </a>
            or email
            <a href="mailto:info@jointheleague.org">info@jointheleague.org</a>
            for stock, DAF, or employer matching details.
          </p>
        </div>
        <CalloutCard class="card--compact" title="Need Donation Support?">
          <p>
            We are happy to provide invoices, customized receipts, and paperwork for matching gifts or corporate sponsorships. Reach out and we will follow up within two business days.
          </p>
          <p>
            Email: <a href="mailto:info@jointheleague.org">info@jointheleague.org</a><br />
            Phone: <a href="tel:18582840481">(858) 284-0481</a>
          </p>
        </CalloutCard>
      </div>
    </div>
    <script is:inline data-src={giveLivelyScript}>
      if (typeof window !== 'undefined') {
        const current = document.currentScript;
        const donationSrc = current?.dataset.src;
        const existing = document.querySelector('script[data-givelively="donate-main"]');
        const loadWidget = () => {
          if (typeof window.GiveLively !== 'undefined') {
            window.GiveLively.setup();
          }
        };

        if (!existing && donationSrc) {
          const script = document.createElement('script');
          script.src = donationSrc;
          script.dataset.givelively = 'donate-main';
          script.addEventListener('load', loadWidget, { once: true });
          document.head.append(script);
        } else if (typeof window.GiveLively !== 'undefined') {
          loadWidget();
        }
      }
    </script>
  </section>

  <section class="section section--surface-alt">
    <div class="container donation-impact">
      <SectionHeader align="left">
        <eyebrow>Impact</eyebrow>
        <h2>How Your Gift Helps</h2>
        <p>Every dollar advances youth-led innovation, mentorship, and access to technology.</p>
      </SectionHeader>
      <div class="donation-impact__grid">
        {donationImpact.map((item) => (
          <CalloutCard class="donation-impact__card" title={item.title}>
            <p>{item.description}</p>
          </CalloutCard>
        ))}
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container donation-methods">
      <SectionHeader align="left">
        <eyebrow>More Ways to Give</eyebrow>
        <h2>Choose the Giving Method that Works for You</h2>
        <p>From recurring gifts to stock transfers, we will help you maximize your impact.</p>
      </SectionHeader>
      <div class="donation-methods__grid">
        {donationMethods.map((method) => (
          <CalloutCard title={method.title} cta={method.cta}>
            <p>{method.description}</p>
          </CalloutCard>
        ))}
      </div>
    </div>
  </section>

  <section class="section section--surface-alt">
    <div class="container">
      <SectionHeader align="left">
        <eyebrow>Questions</eyebrow>
        <h2>Donation FAQs</h2>
        <p>Do not see your answer? Email us and we will help right away.</p>
      </SectionHeader>
      <div class="faq-grid">
        {donationFaq.map((item) => (
          <CalloutCard title={item.question}>
            <p>{item.answer}</p>
          </CalloutCard>
        ))}
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <CalloutCard
        class="contact-card"
        title="Connect with Our Development Team"
        cta={{ label: 'Contact Us', href: '/about/contact/', variant: 'secondary' }}
      >
        <p>
          We welcome conversations about corporate partnerships, in-kind donations, peer-to-peer fundraisers, and legacy gifts. Let us know how you would like to engage, and we will craft the right plan together.
        </p>
      </CalloutCard>
    </div>
  </section>
</BaseLayout>
