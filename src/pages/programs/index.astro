---
import BaseLayout from "../../layouts/BaseLayout.astro";
import SectionHeader from "../../components/SectionHeader.astro";
import Section from "../../components/Section.astro";
import HeroSection from "../../components/HeroSection.astro";
import ProgramCard from "../../components/ProgramCard.astro";
import CardBody from "../../components/CardBody.astro";
import CardFooter from "../../components/CardFooter.astro";
import CalloutCard from "../../components/CalloutCard.astro";

// Programs data moved from _index.yaml
const yamlContent = {
  main_programs: [
    {
      id: "python-classes",
      title: "Python Coding Classes",
      level: "Beginner",
      description:
        "Start with the most approachable programming language and build " +
        "real projects while mastering problem solving, logic, and collaboration.",
      price: "$280 per month",
      link: "/programs/classes/python/",
      cta: "Explore Python Track",
      highlights: [
        "Official Python certificates",
        "In-person and online cohorts",
        "Small classes with five students per teacher",
      ],
      image: {
        src: "/images/python.png",
        alt: "Illustration representing Python coding",
      },
      display_in: ["card", "table"],
      table_data: {
        program: "Python Coding Classes",
        level: "Beginner",
        duration: "1.5 hours weekly",
        tuition: "$280 monthly",
        assistance: "Available",
        schedule: "Year-round",
        ratio: "5 students per teacher",
        languages: "Python",
      },
    },
    {
      id: "java-classes",
      title: "Java Coding Classes",
      level: "Intermediate to Advanced",
      description:
        "Progress toward AP Computer Science readiness and Oracle Professional Certification " +
        "with industry-grade tools and mentorship.",
      price: "$280 per month",
      link: "/programs/classes/java/",
      cta: "Explore Java Track",
      highlights: [
        "Oracle-aligned curriculum",
        "Hybrid and online schedules",
        "Project-based learning across eight levels",
      ],
      image: {
        src: "/images/java.png",
        alt: "Illustration representing Java development",
      },
      display_in: ["card", "table"],
      table_data: {
        program: "Java Coding Classes",
        level: "Beginner to Advanced",
        duration: "1.5 hours weekly",
        tuition: "$280 monthly",
        assistance: "Available",
        schedule: "Year-round",
        ratio: "5 students per teacher",
        languages: "Java",
      },
    },
    {
      id: "tech-club",
      title: "Tech Club",
      level: "Beginner to Advanced",
      description:
        "Drop into free and low-cost workshops that introduce Python, Java, AI, robotics, electronics, and more across San Diego libraries and schools.",
      price: "Free",
      link: "/programs/tech-club/",
      cta: "Join Tech Club",
      highlights: [
        "Multiple weekly meetups",
        "Hands-on demos and mini-projects",
        "Volunteer mentors and alumni support",
      ],
      image: {
        src: "/images/codingcamps.png",
        alt: "Illustration highlighting collaborative workshops",
      },
      display_in: ["card", "table"],
      table_data: {
        program: "Tech Club",
        level: "Beginner",
        duration: "60 to 90 minutes per class",
        tuition: "Free",
        assistance: "Not needed",
        schedule: "Year-round",
        ratio: "10 students per teacher",
        languages: "Python",
      },
    },
    {
      id: "private-classes",
      title: "Private Classes",
      link: "https://jointheleague.typeform.com/to/winxxt",
      display_in: ["table"],
      table_data: {
        program: "Private Classes",
        level: "All Levels",
        duration: "90 minutes weekly",
        tuition: "$430 monthly",
        assistance: "Not available",
        schedule: "Year-round",
        ratio: "1 student per teacher",
        languages: "Java and Python",
      },
    },
    {
      id: "seasonal-camps",
      title: "Seasonal Coding Camps",
      link: "/camps/",
      display_in: ["table"],
      table_data: {
        program: "Seasonal Coding Camps",
        level: "All Levels",
        duration: "Week-long, weekend, and afterschool camps",
        tuition: "Varies",
        assistance: "Available",
        schedule: "Spring, summer, and winter sessions",
        ratio: "5 students per teacher",
        languages: "Varies by camp",
      },
    },
  ],
  other_programs: [
    {
      title: "Code Clinic",
      description:
        "Online deep dives into emerging technologies for advanced students.",
      href: "/programs/tech-club/code-clinic/",
    },
    {
      title: "Project Clinic",
      description:
        "Personalized consulting sessions to ship your independent project.",
      href: "/programs/project-clinic/",
    },
    {
      title: "FIRST Robot Programming",
      description:
        "Free skills classes supporting FIRST FTC and FRC robotics teams.",
      href: "/programs/tech-club/robot-garage/#first",
    },
    {
      title: "League Labs",
      description:
        "Intern with the League to design future curriculum and earn job experience.",
      href: "/programs/league-labs/",
    },
    {
      title: "Summer Research",
      description:
        "Collaborate on research projects in computational science and AI.",
      href: "/camps/summer-2025/summer-projects/#research",
    },
    {
      title: "League at Work",
      description:
        "Bring League instruction to your company as an employee benefit.",
      href: "/donate/the-league-at-work/",
    },
  ],
};
---

<BaseLayout
  title="Programs"
  description="Weekly Python and Java classes, free Tech Club workshops, and seasonal camps that help San Diego students grow from beginner coders to certified professionals."
>
  <HeroSection
    class="section programs-hero"
    note="Grades 3-12"
    details={[
      "Curriculum designed to keep pace with students for four to six years of mastery.",
      "Classes run seven days a week with in-person and live online options.",
    ]}
    actions={[
      {
        label: "View Weekly Classes",
        href: "/programs/classes/",
        variant: "primary" as const,
      },
      {
        label: "Explore Tech Club",
        href: "/programs/tech-club/",
        variant: "secondary" as const,
      },
    ]}
  >
    <h1 slot="title">Weekly Coding That Grows With Students</h1>
    <p slot="description">
      Python and Java tracks guide 5th through 12th graders from their first
      line of code to professional certifications. Students can learn in Carmel
      Valley, at partner schools, or online from anywhere.
    </p>
    <figure slot="media" class="programs-hero__media">
      <img
        src="/images/programs.png"
        alt="League students collaborating during a coding class"
        loading="lazy"
      />
    </figure>
  </HeroSection>

  <Section startBgcolor="#fff2e8" endBgcolor="#ffffff" class="section--programs-main">
    <SectionHeader>
      <h2>Main Programs</h2>
      <p>
        Choose the learning path that matches your schedule, skill level, and
        goals.
      </p>
    </SectionHeader>
    <div class="program-grid">
      {
        yamlContent.main_programs
          .filter((program: any) => program.display_in.includes("card"))
          .map((program: any) => (
            <ProgramCard img={program.image.src} alt={program.image.alt}>
              <CardBody eyebrow={program.level.toUpperCase()}>
                <h2 slot="title">{program.title}</h2>
                <description>{program.description}</description>
                <ul>
                  {program.highlights.map((highlight: string) => (
                    <li>{highlight}</li>
                  ))}
                </ul>
                <price>{program.price}</price>
              </CardBody>
              <CardFooter>
                <a
                  slot="primary"
                  class="button button--primary"
                  href={program.link}
                >
                  {program.cta}
                </a>
              </CardFooter>
            </ProgramCard>
          ))
      }
    </div>
  </Section>

  <Section class="section--program-comparison">
    <SectionHeader>
      <h2>Compare Our Programs</h2>
      <p>
        See key differences in cost, timing, and format across every League
        offering.
      </p>
    </SectionHeader>
    <div class="table-wrapper">
      <table class="table comparison-table">
        <thead>
          <tr>
            <th scope="col"></th>
            {
              // Program names become the column headers
              yamlContent.main_programs
                .filter((program: any) => program.display_in.includes("table"))
                .map((program: any) => (
                  <th scope="col">{program.table_data.program}</th>
                ))
            }
          </tr>
        </thead>
        <tbody>
          {
            // Transposed rows: each original column becomes a row label
            [
              { label: 'Level', key: 'level' },
              { label: 'Duration', key: 'duration' },
              { label: 'Tuition', key: 'tuition' },
              { label: 'Assistance', key: 'assistance' },
              { label: 'Schedule', key: 'schedule' },
              { label: 'Ratio', key: 'ratio' },
              { label: 'Languages', key: 'languages' },
            ].map((row: any) => (
              <tr>
                <th scope="row">{row.label}</th>
                {
                  yamlContent.main_programs
                    .filter((program: any) => program.display_in.includes("table"))
                    .map((program: any) => (
                      <td>{program.table_data[row.key]}</td>
                    ))
                }
              </tr>
            ))
          }
        </tbody>
      </table>
    </div>


  </Section>

  <Section class="section--support">
    <SectionHeader>
      <h2>More Ways to Learn</h2>
      <p>
        Extend your skills with specialty workshops, internships, and robotics
        programs.
      </p>
    </SectionHeader>
    <div class="support-grid">
      {
        yamlContent.other_programs.map((program: any) => (
          <CalloutCard class="support-card" title={program.title}>
            <p>{program.description}</p>
            <a slot="footer" class="link" href={program.href}>
              Learn more
            </a>
          </CalloutCard>
        ))
      }
    </div>
  </Section>


</BaseLayout>

<style>
  /* Programs page specific styles */
  .programs-hero {
    position: relative;
    background: linear-gradient(
      180deg,
      rgba(93, 95, 239, 0.22) 0%,
      rgba(243, 113, 33, 0.14) 45%,
      var(--color-peach) 100%
    );
    padding: var(--space-4xl) 0 var(--space-3xl);
  }

  .programs-hero::before {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
        circle at 12% 18%,
        rgba(93, 95, 239, 0.28),
        transparent 45%
      ),
      radial-gradient(
        circle at 88% 12%,
        rgba(243, 113, 33, 0.18),
        transparent 35%
      );
    pointer-events: none;
  }

  .programs-hero .hero-section__title {
    margin-bottom: var(--space-lg);
  }

  .programs-hero .hero-section__details {
    display: grid;
    gap: var(--space-sm);
  }

  .programs-hero__media {
    margin: 0;
    text-align: center;
  }

  .programs-hero__media img {
    max-width: 400px;
    width: 100%;
    height: auto;
  }

  .section--program-comparison {
    background: var(--color-surface);
  }



  .section--split {
    background: var(--color-surface);
  }

  .split-grid {
    display: grid;
    gap: var(--space-xl);
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .split-card {
    background: var(--color-surface-subtle);
    border: 1px solid var(--color-border);
  }

  /* Programs page specific styles - only classes used on this page */
  .section--support {
    background: linear-gradient(180deg, #ffffff 0%, rgba(255, 242, 232, 0.78) 100%);
  }

  .section--cta {
    background: var(--color-surface-subtle);
  }

  .support-grid {
    display: grid;
    gap: var(--space-xl);
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  }

  .support-card {
    display: grid;
    gap: var(--space-md);
    background: var(--color-surface-alt);
    border: 1px solid var(--color-border);
  }

  .link {
    color: var(--color-primary);
    font-weight: 600;
  }

  .split-layout {
    display: grid;
    gap: var(--space-2xl);
    align-items: center;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  table {
    width: 100%;
    border-collapse: collapse;
    min-width: 720px;
  }

  th,
  td {
    padding: var(--space-md);
    border-bottom: 1px solid var(--color-border);
    text-align: left;
  }

  tbody tr:last-child th,
  tbody tr:last-child td {
    border-bottom: none;
  }

  th a {
    color: inherit;
    text-decoration: underline;
  }  /* Layout Grids */
  .program-grid {
    display: grid;
    gap: var(--space-xl);
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  }

  .camp-grid {
    display: grid;
    gap: var(--space-xl);
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .track-grid {
    display: grid;
    gap: var(--space-xl);
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  }

  .special-grid {
    display: grid;
    gap: var(--space-xl);
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  }

  .idea-grid {
    display: grid;
    gap: var(--space-xl);
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  }

  .offerings-grid {
    display: grid;
    gap: var(--space-xl);
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  }

  .levels-grid {
    display: grid;
    gap: var(--space-xl);
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  }

  .language-grid {
    display: grid;
    gap: var(--space-xl);
    align-items: stretch;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .resource-grid {
    display: grid;
    gap: var(--space-2xl);
    align-items: start;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .resource-grid__links ul {
    margin: 0;
    padding-left: 20px;
    display: grid;
    gap: var(--space-sm);
  }

  .clinic-grid {
    display: grid;
    gap: var(--space-2xl);
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .try-grid {
    display: grid;
    gap: var(--space-2xl);
  }

  .contact-grid {
    display: grid;
    gap: var(--space-2xl);
    align-items: start;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .about-grid {
    display: grid;
    gap: var(--space-3xl);
    grid-template-columns: repeat(auto-fit, minmax(280px, 1tr));
    align-items: start;
  }

  .about-grid__cards {
    display: grid;
    gap: var(--space-xl);
  }

  .two-column {
    display: grid;
    gap: var(--space-3xl);
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    align-items: start;
  }

  .two-column__copy {
    display: grid;
    gap: var(--space-lg);
  }

  .two-column__aside {
    display: grid;
    gap: var(--space-lg);
  }

  .two-column__list {
    display: grid;
    gap: var(--space-lg);
  }

  .two-column__list ul {
    margin: 0;
    padding-left: 20px;
    display: grid;
    gap: var(--space-sm);
  }

  .schedule-grid {
    display: grid;
    gap: var(--space-3xl);
    grid-template-columns: minmax(0, 2fr) minmax(0, 1fr);
    align-items: start;
  }

  .schedule-grid__intro {
    max-width: 680px;
    margin-bottom: var(--space-xl);
  }

  .schedule-grid__intro a {
    font-weight: 600;
  }

  .schedule-aside {
    display: grid;
    gap: var(--space-2xl);
    align-content: start;
  }

  /* Card Variations */
  .card__media {
    margin: 0;
    text-align: center;
  }

  .card__media img {
    width: 100%;
  }

  .card ul {
    margin: 0;
    padding-left: 20px;
    display: grid;
    gap: var(--space-xs);
  }

  .card__price {
    font-weight: 600;
    color: var(--color-primary);
    margin: 0;
  }

  .card__footer {
    margin-top: auto;
  }

  .fact-card {
    width: 100%;
    display: grid;
    gap: var(--space-lg);
  }

  .fact-card__list,
  .class-card__list,
  .highlight-card__list,
  .program-card ul {
    margin: 0;
    padding-left: 20px;
    display: grid;
    gap: var(--space-xs);
  }

  .class-card {
    display: grid;
    gap: var(--space-lg);
  }

  .class-card__tuition {
    font-weight: 600;
    color: var(--color-primary);
    margin: 0;
  }

  .highlight-card {
    width: 100%;
    display: grid;
    gap: var(--space-lg);
  }

  .notes-card {
    max-width: 720px;
    margin: 0 auto;
  }

  .notes-card__list {
    margin: 0;
    padding-left: 20px;
    display: grid;
    gap: var(--space-sm);
  }

  .language-card {
    display: grid;
    gap: var(--space-xl);
    text-align: center;
  }

  .language-card__media {
    margin: 0;
  }

  .language-card__media img {
    width: 100%;
    height: auto;
    display: block;
  }

  .level-card {
    position: relative;
    padding-top: var(--space-2xl);
  }

  .level-card .card__title {
    margin-top: 56px;
  }

  .level-card__badge {
    position: absolute;
    top: var(--space-lg);
    left: var(--space-xl);
    font-size: 48px;
    font-weight: 700;
    color: #54cad5;
    line-height: 1;
  }

  .program-card {
    display: grid;
    gap: var(--space-lg);
  }

  .program-card .card__media {
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 200px;
  }

  .program-card .card__media img {
    width: auto;
    height: auto;
    max-height: 200px;
    max-width: 100%;
    object-fit: contain;
    margin: 0;
  }

  .program-card .card__footer {
    margin-top: auto;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .program-card .enrollment-buttons {
    justify-content: space-between;
  }

  .program-card .learn-more-button {
    justify-content: center;
  }

  .program-card--center {
    text-align: center;
  }


  .notes {
    margin: var(--space-lg) 0;
  }

  .clinic-card {
    display: grid;
    gap: var(--space-lg);
  }

  .clinic-links {
    margin: 0;
    padding-left: 20px;
    display: grid;
    gap: var(--space-sm);
  }

  .offering {
    display: grid;
    gap: var(--space-lg);
    text-align: center;
  }

  .offering__media {
    margin: 0;
  }

  .offering__media img {
    max-width: 160px;
    margin: 0 auto;
  }




  .try-card {
    display: grid;
    gap: var(--space-2xl);
    align-items: center;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  }

  .try-card__body {
    display: grid;
    gap: var(--space-lg);
    max-width: 640px;
  }

  .try-card__copy {
    display: grid;
    gap: var(--space-lg);
  }

  .try-card__media {
    margin: 0;
    text-align: center;
  }

  .try-card__media img {
    width: 100%;
    max-width: 280px;
    height: auto;
  }

  /* Program Content */
  .camp {
    display: grid;
    gap: var(--space-lg);
  }

  .camp__level,
  .track__level {
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
  }

  .track {
    display: grid;
    gap: var(--space-lg);
  }

  .track__media,
  .side-image {
    margin: 0;
  }

  .track__media img,
  .side-image img {
    width: 100%;
    height: auto;
    border-radius: var(--radius-md);
  }

  .details {
    font-weight: 600;
  }

  .tips {
    margin: 0;
  }

  .flow-list {
    margin: var(--space-lg) 0 0;
    padding-left: 0;
    list-style: none;
    display: grid;
    gap: var(--space-md);
  }

  .flow-list li {
    display: grid;
    gap: var(--space-xs);
  }

  .flow-list__time {
    font-weight: 600;
  }

  .faq {
    display: grid;
    gap: var(--space-lg);
  }

  
  .emphasis {
    background: var(--color-surface-alt);
  }

  .emphasis--subtle {
    background: var(--color-surface-subtle);
  }

  /* Program comparison table styling */
  .section--program-comparison table th:nth-child(even),
  .section--program-comparison table td:nth-child(even) {
    background-color: var(--color-table-alt) !important;
  }

  .section--program-comparison table th,
  .section--program-comparison table td {
    font-size: 24pt;
    color: var(--color-primary);
  }

  .comparison-table thead {
    background: #ffffff !important;
    color: var(--color-primary) !important;
  }

  .comparison-table thead th {
    background: #ffffff !important;
    color: var(--color-primary) !important;
  }

  /* Responsive adjustments for this page */
  @media (max-width: 600px) {
    th,
    td {
      padding: var(--space-sm);
    }

    .split-layout {
      gap: var(--space-xl);
    }
  }
</style>
