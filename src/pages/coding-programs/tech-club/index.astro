---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import SectionHeader from '../../../components/SectionHeader.astro';
import EmbedLoader from '../../../components/EmbedLoader.astro';
import CalloutCard from '../../../components/ui/CalloutCard.astro';
import { techClubHero, techClubPrograms, techClubTopics, meetupLinks, contactInfo } from '../../../data/techClub';
import '../../../styles/pages/coding-programs/base.css';
import '../../../styles/pages/coding-programs/tech-club/index.css';

const donationScript =
  'https://secure.givelively.org/widgets/simple_donation/the-league-of-amazing-programmers.js?show_suggested_amount_buttons=true&show_in_honor_of=false&address_required=false&has_required_custom_question=null&suggested_donation_amounts[]=250&suggested_donation_amounts[]=125&suggested_donation_amounts[]=100&suggested_donation_amounts[]=50';
const phoneHref = contactInfo.phone.replace(/[^0-9]/g, '');
---

<BaseLayout
  title="League Tech Club"
  description="Free Python, Java, robotics, and JavaScript workshops offered across San Diego libraries, schools, and community spaces."
>
  <section class="section section--surface-alt hero">
    <div class="container hero__grid">
      <div class="hero__copy">
        <p class="tag">{techClubHero.tag}</p>
        <h1>{techClubHero.title}</h1>
        <p>{techClubHero.description}</p>
        <div class="hero__actions button-group">
          <a class="button button--primary" href={techClubHero.primaryAction.href}>{techClubHero.primaryAction.label}</a>
          <a class="button button--secondary" href={techClubHero.secondaryAction.href}>{techClubHero.secondaryAction.label}</a>
        </div>
      </div>
      <CalloutCard
        class="hero__aside"
        title="What to Expect"
        headingLevel={2}
        items={techClubHero.details}
        itemsClass="hero__list"
      >
        <a slot="footer" class="link" href={meetupLinks.techClub}>Browse the upcoming schedule</a>
      </CalloutCard>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <SectionHeader
        title="Hands-On Workshops"
        description="Every Tech Club session focuses on a single topic so students can experiment, ask questions, and ship something new in under an hour."
      />
      <div class="program-grid">
        {techClubPrograms.map((program) => (
          <CalloutCard class="program-card" title={program.title}>
            <figure slot="media" class="program-card__media">
              <img src={program.image.src} alt={program.image.alt} loading="lazy" />
            </figure>
            <p class="card__body">{program.description}</p>
          </CalloutCard>
        ))}
      </div>
    </div>
  </section>

  <section class="section section--surface-alt">
    <div class="container">
      <div class="two-column">
        <div class="two-column__copy">
          <SectionHeader
            title="Start Coding in 60 Minutes"
            description="Each Tech Club class runs about an hour and introduces core programming concepts through mini projects."
            align="left"
          />
          <p>
            Sessions are hosted across San Diego County in partnership with schools, libraries, recreation centers, and
            community organizations. Volunteer mentors from the League guide learners through projects, debug code side by
            side, and share next steps for students who want to keep going.
          </p>
          <p>
            New families can drop into a single meetup while returning members weave Tech Club events into their weekly
            schedule. All classes are free with optional donations supporting hardware, classroom space, and instructor
            training.
          </p>
        </div>
        <CalloutCard
          class="two-column__list"
          title="Topics We Cover"
          cta={{ label: 'Join the Tech Club Meetup', href: meetupLinks.techClub, variant: 'primary' }}
        >
          <ul>
            {techClubTopics.map((topic) => (
              <li>
                <strong>{topic.title}:</strong> {topic.body}
              </li>
            ))}
          </ul>
        </CalloutCard>
      </div>
    </div>
  </section>

  <section class="section" id="upcoming-events">
    <div class="container">
      <SectionHeader
        title="Upcoming Events"
        description="Check the live Tech Club calendar to RSVP for classes near you or join an online session."
      />
      <div class="embed">
        <EmbedLoader
          src="https://snips.jtlapp.net/leaguesync/meetups/the-league-tech-club.html"
          title="Tech Club schedule"
        />
      </div>
    </div>
  </section>

  <section class="section section--surface-alt" id="host-tech-club">
    <div class="container">
      <div class="two-column">
        <div class="two-column__copy">
          <SectionHeader
            title="Host the Tech Club"
            description="Bring free programming workshops to your school, company, or library."
            align="left"
          />
          <p>
            The League offers Tech Club sessions anywhere in San Diego County to fulfill our mission of giving every
            student an introduction to coding. We supply instructors, curriculum, and equipment. You help us recruit
            students and provide space.
          </p>
          <p>
            Ready to partner? Reach out to our Executive Director, Eric Busboom, to plan a series tailored to your
            community.
          </p>
        </div>
        <CalloutCard
          class="two-column__list contact-card"
          title="Contact"
          cta={{ label: 'Contact Form', href: '/about/contact/', variant: 'secondary' }}
        >
          <ul>
            <li><strong>Phone:</strong> <a href={`tel:${phoneHref}`}>{contactInfo.phone}</a></li>
            <li><strong>Email:</strong> <a href={`mailto:${contactInfo.email}`}>{contactInfo.email}</a></li>
          </ul>
        </CalloutCard>
      </div>
    </div>
  </section>

  <section class="section" id="support-tech-club">
    <div class="container donation">
      <SectionHeader
        title="Support Free Community Classes"
        description="A $250 gift funds a full Tech Club session in a neighborhood library, school, or community center."
      />
      <div id="give-lively-widget" class="donation__widget" />
      <p class="donation__note">
        Prefer a direct link? Visit
        <a href="https://secure.givelively.org/donate/the-league-of-amazing-programmers" target="_blank" rel="noopener">
          our Give Lively page
        </a>
        to contribute.
      </p>
    </div>
    <script is:inline data-src={donationScript}>
      if (typeof window !== 'undefined') {
        const current = document.currentScript;
        const donationSrc = current?.dataset.src;
        const existing = document.querySelector('script[data-givelively="tech-club"]');
        const loadWidget = () => {
          if (typeof window.GiveLively !== 'undefined') {
            window.GiveLively.setup();
          }
        };

        if (!existing && donationSrc) {
          const script = document.createElement('script');
          script.src = donationSrc;
          script.dataset.givelively = 'tech-club';
          script.addEventListener('load', loadWidget, { once: true });
          document.head.append(script);
        } else if (typeof window.GiveLively !== 'undefined') {
          loadWidget();
        }
      }
    </script>
  </section>

</BaseLayout>
