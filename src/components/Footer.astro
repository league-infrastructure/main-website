---

import { siteSettings, socialLinks } from '../data/siteSettings';
import { mainNavigation } from '../data/navigation';
import Social from 'fulldev-ui/components/Social.astro';

const decoratedSocialLinks = socialLinks.map((item) => ({
  ...item,
  iconName: item.icon ? `brand-${item.icon}` : undefined,
}));
---

<footer class="footer">
  <div class="container">
    <div class="footer__grid">
      <div>
        <h3 class="footer__heading">{siteSettings.shortName}</h3>
        <p>
          We prepare young people for the science and technology careers of the 21st century through
          real coding education, professional mentorship, and project-based learning.
        </p>
      </div>
      <div>
        <h4 class="footer__heading">Visit &amp; Contact</h4>
        <address>
          <p>
            {siteSettings.address}<br />
            <a href={siteSettings.directionsUrl} rel="noreferrer">Get directions</a>
          </p>
          <p>
            <a href={siteSettings.phoneHref}>{siteSettings.phone}</a><br />
            <a href={`mailto:${siteSettings.email}`}>{siteSettings.email}</a>
          </p>
        </address>
      </div>
      <div>
        <h4 class="footer__heading">Explore</h4>
        <ul class="list-reset footer__links">
          {mainNavigation.map((item) => (
            <li>
              <a
                href={item.href}
                target={item.external ? '_blank' : undefined}
                rel={item.external ? 'noreferrer' : undefined}
              >
                {item.label}
              </a>
            </li>
          ))}
          <li><a href="/donate/volunteer/">Volunteer</a></li>
          <li><a href="/donate/create-a-fundraiser/">Create a Fundraiser</a></li>
        </ul>
      </div>

      <div>
        <h4 class="footer__heading">Stay Connected</h4>
        <ul class="list-reset footer__links footer__links--social">
          {decoratedSocialLinks.map((item) => (
            <li>
              <Social
                href={item.href}
                icon={item.iconName}
                aria-label={item.label}
                title={item.label}
                variant="ghost"
                size="sm"
              />
            </li>
          ))}
        </ul>
      </div>
    </div>
    <div class="footer__bottom">
      <span>Â© {new Date().getFullYear()} {siteSettings.name}. 501(c)(3) Tax ID: 20-4744610.</span>
      <span class="footer__policies">
        <a href="/about/policies/nondiscrimination-policy/">Nondiscrimination Policy</a>
        <a href="/about/policies/privacy-policy/">Privacy Policy</a>
        <a href="/images/2021/11/LOAP_SafeReopeningPlan.pdf" target="_blank" rel="noreferrer">Safe Reopening Plan</a>

      </span>
    </div>
  </div>
</footer>

<style>
  .footer {
    background: var(--color-surface-alt);
    padding: 70px 0;
    margin-top: 0;
  }

  .footer__grid {
    display: grid;
    gap: var(--space-xl);
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  }

  .footer__heading {
    margin-top: 0;
    margin-bottom: var(--space-md);
    color: var(--color-text);
  }

  .footer address {
    font-style: normal;
    color: var(--color-body);
  }

  .footer__links {
    display: grid;
    gap: var(--space-xs);
  }

  .footer__links--social {
    display: flex;
    gap: var(--space-sm);
  }

  .footer__links--social li {
    margin: 0;
  }

  .footer__links--social :global(.button) {
    padding: 0;
    width: 40px;
    height: 40px;
    min-width: 40px;
    min-height: 40px;
    border-radius: 50%;
    justify-content: center;
    align-items: center;
    color: var(--color-text);
  }

  .footer__links--social :global(.button:hover),
  .footer__links--social :global(.button:focus) {
    color: var(--color-primary);
    background: rgba(243, 113, 33, 0.12);
  }

  .footer__links--social :global(.button .icon) {
    width: 1.25rem;
    height: 1.25rem;
  }

  .footer__links a {
    color: var(--color-body);
  }

  .footer__links a:hover,
  .footer__links a:focus {
    color: var(--color-primary);
  }

  .footer__bottom {
    margin-top: var(--space-2xl);
    padding-top: var(--space-lg);
    border-top: 1px solid var(--color-border);
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-md);
    align-items: center;
    justify-content: space-between;
    color: var(--color-muted);
    font-size: 14px;
  }

  .footer__policies {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-md);
  }

  .footer__policies a {
    color: var(--color-muted);
  }

  @media (max-width: 640px) {
    .footer__bottom {
      align-items: flex-start;
      flex-direction: column;
    }
  }
</style>
